<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="container mt-5">
      <h1>Student Dashboard</h1>
      <!-- Chart for groups distribution -->
      <h2>Groups Distribution</h2>
      <canvas id="groupsChart"></canvas>

      <!-- Table to display student data -->
      <h2>Students</h2>
      <table class="table" id="studentsTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>Full Name</th>
            <th>Birth Date</th>
            <th>Group</th>
            <th>Rank</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <script>
      // Mock data simulating what we would get from the server
      const mockData = {
        groups: [
          {
            group_name: "Group A",
            students: [
              {
                id: 1,
                full_name: "John Doe",
                birth_date: "1995-05-12",
                rank_name: "Private",
              },
              {
                id: 2,
                full_name: "Mary Johnson",
                birth_date: "1996-11-24",
                rank_name: "Private",
              },
              {
                id: 6,
                full_name: "Alice Green",
                birth_date: "1998-01-15",
                rank_name: "Corporal",
              },
              {
                id: 7,
                full_name: "David Lee",
                birth_date: "1997-04-22",
                rank_name: "Private",
              },
              {
                id: 8,
                full_name: "Emma White",
                birth_date: "1999-03-30",
                rank_name: "Private",
              },
              {
                id: 9,
                full_name: "Michael Brown",
                birth_date: "1994-06-10",
                rank_name: "Sergeant",
              },
              {
                id: 10,
                full_name: "Sophia Harris",
                birth_date: "1995-12-05",
                rank_name: "Private",
              },
              {
                id: 11,
                full_name: "James Clark",
                birth_date: "1996-02-18",
                rank_name: "Corporal",
              },
              {
                id: 12,
                full_name: "Olivia Miller",
                birth_date: "1997-08-21",
                rank_name: "Private",
              },
              {
                id: 13,
                full_name: "Ethan Davis",
                birth_date: "1999-11-12",
                rank_name: "Private",
              },
            ],
          },
          {
            group_name: "Group B",
            students: [
              {
                id: 3,
                full_name: "Sam Smith",
                birth_date: "1994-02-20",
                rank_name: "Sergeant",
              },
              {
                id: 14,
                full_name: "Benjamin Wilson",
                birth_date: "1995-03-14",
                rank_name: "Lieutenant",
              },
              {
                id: 15,
                full_name: "Chloe Moore",
                birth_date: "1997-07-11",
                rank_name: "Private",
              },
              {
                id: 16,
                full_name: "Daniel Anderson",
                birth_date: "1998-09-03",
                rank_name: "Private",
              },
              {
                id: 17,
                full_name: "Isabella Jackson",
                birth_date: "1999-05-28",
                rank_name: "Corporal",
              },
            ],
          },
          {
            group_name: "Group C",
            students: [
              {
                id: 4,
                full_name: "Jane Doe",
                birth_date: "1997-03-15",
                rank_name: "Lieutenant",
              },
              {
                id: 5,
                full_name: "Robert Brown",
                birth_date: "1993-07-10",
                rank_name: "Private",
              },
              {
                id: 18,
                full_name: "Henry Garcia",
                birth_date: "1996-12-22",
                rank_name: "Private",
              },
              {
                id: 19,
                full_name: "Lily Martinez",
                birth_date: "1997-01-19",
                rank_name: "Private",
              },
              {
                id: 20,
                full_name: "William Rodriguez",
                birth_date: "1998-10-30",
                rank_name: "Sergeant",
              },
              {
                id: 21,
                full_name: "Lucas Perez",
                birth_date: "1999-04-04",
                rank_name: "Corporal",
              },
              {
                id: 22,
                full_name: "Mia Sanchez",
                birth_date: "1995-06-23",
                rank_name: "Private",
              },
              {
                id: 23,
                full_name: "Aiden King",
                birth_date: "1994-09-10",
                rank_name: "Lieutenant",
              },
            ],
          },
        ],
      };

      // Displaying student data in a table
      const studentsTable = document
        .getElementById("studentsTable")
        .getElementsByTagName("tbody")[0];

      mockData.groups.forEach((group) => {
        group.students.forEach((student) => {
          const row = studentsTable.insertRow();
          row.innerHTML = `
                    <td>${student.id}</td>
                    <td>${student.full_name}</td>
                    <td>${student.birth_date}</td>
                    <td>${group.group_name}</td>
                    <td>${student.rank_name}</td>
                `;
        });
      });

      // Creating a chart to show group distribution
      const groupNames = mockData.groups.map((group) => group.group_name);
      const groupCounts = mockData.groups.map((group) => group.students.length);

      const ctx = document.getElementById("groupsChart").getContext("2d");
      const groupsChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: groupNames,
          datasets: [
            {
              label: "Number of Students per Group",
              data: groupCounts,
              backgroundColor: "rgba(54, 162, 235, 0.3)",
              borderColor: "rgba(54, 162, 235, 1)",
              borderWidth: 2,
            },
          ],
        },
      });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
